var jpcrm_woo_options={jpcrm_wcsetuptype:0,jpcrm_wcdomain:"",jpcrm_wckey:"",jpcrm_wcsecret:"",jpcrm_wcprefix:"",jpcrm_wcinv:1,jpcrm_wctagcust:1,jpcrm_wcacc:1};function jpcrm_woosync_update_details(){window.jpcrm_woo_options.jpcrm_wcdomain=jQuery("#jpcrm_wcdomain").val(),window.jpcrm_woo_options.jpcrm_wckey=jQuery("#jpcrm_wckey").val(),window.jpcrm_woo_options.jpcrm_wcsecret=jQuery("#jpcrm_wcsecret").val(),window.jpcrm_woo_options.jpcrm_wcprefix=jQuery("#jpcrm_wcprefix").val(),window.jpcrm_woo_options.jpcrm_wcinv=jQuery("#jpcrm_wcinv").is(":checked")?1:0,window.jpcrm_woo_options.jpcrm_wctagcust=jQuery("#jpcrm_wctagcust").is(":checked")?1:0,window.jpcrm_woo_options.jpcrm_wcacc=jQuery("#jpcrm_wcacc").is(":checked")?1:0}jQuery(document).ready(function(){jQuery("#external-install").hide(),jQuery("#back-to-setup-type").on("click",function(){jQuery("#step-1-button").click()}),jQuery("#back-to-api-info").on("click",function(){jQuery("#step-2-button").click()}),jQuery("#back-to-options").on("click",function(){jQuery("#step-3-button").click()}),jQuery(".choose .btn").on("click",function(){window.jpcrm_woo_options.jpcrm_wcsetuptype=jQuery(this).data("setup"),jQuery("#jpcrm-woo-setup-"+jpcrm_woo_options.jpcrm_wcsetuptype+" .selected").show(),jQuery("#jpcrm-woo-setup-"+jpcrm_woo_options.jpcrm_wcsetuptype+" .choose").hide(),1==jpcrm_woo_options.jpcrm_wcsetuptype?(jQuery("#jpcrm-woo-setup-0 .choose").show(),jQuery("#jpcrm-woo-setup-0 .selected").hide(),jQuery("#sc-0").removeClass("setup-selected"),jQuery("#sc-1").addClass("setup-selected"),jQuery("#external-install").show(),jQuery("#same-install").hide()):(jQuery("#jpcrm-woo-setup-1 .choose").show(),jQuery("#jpcrm-woo-setup-1 .selected").hide(),jQuery("#sc-1").removeClass("setup-selected"),jQuery("#sc-0").addClass("setup-selected"),jQuery("#external-install").hide(),jQuery("#same-install").show())});var r=jQuery("div.setup-panel div a"),o=jQuery(".setup-content"),e=jQuery(".nextBtn"),c=(jQuery(".backBtn"),jQuery(".stepwizard-step"));o.hide(),r.on("click",function(e){e.preventDefault();var e=jQuery(jQuery(this).attr("href")),c=jQuery(this);c.hasClass("disabled")||(r.removeClass("btn-primary").addClass("btn-default"),c.addClass("btn-primary"),o.hide(),e.show(),e.find("input:eq(0)").trigger("focus"))}),c.on("click",function(){jpcrm_woosync_update_details()}),e.on("click",function(){var e=jQuery(this).closest(".setup-content"),c=e.attr("id"),c=jQuery('div.setup-panel div a[href="#'+c+'"]').parent().next().children("a"),r=e.find("input[type='text'],input[type='url']"),o=!0;jQuery(".form-group").removeClass("has-error");for(var t=0;t<r.length;t++)r[t].validity.valid||(o=!1,jQuery(r[t]).closest(".form-group").addClass("has-error"));o&&c.prop("disabled",!1).trigger("click")}),jQuery("div.setup-panel div a.btn-primary").trigger("click"),jQuery(".jpcrm-gogogo").off("click").on("click",function(e){if(jpcrm_woosync_update_details(),jQuery(this).hasClass("disabled"))return!1;jQuery(this).addClass("disabled");var c=window.jpcrm_woo_options;c.action="jpcrm_woosync_wizard_finished",c.security=jQuery("#jpcrm-woo-wizard-ajax-nonce").val(),jQuery(".laststage").hide(),jQuery(".finishingupblock").show(),jQuery(".finishblock").hide(),(i=jQuery.ajax({url:window.ajaxurl,type:"POST",data:c,dataType:"json"})).done(function(e){jQuery(".laststage").hide(),jQuery(".finishingupblock").hide(),jQuery(".finishblock").show()}),i.fail(function(e){jQuery(".laststage").hide(),jQuery(".finishingupblock").hide(),jQuery(".finishblock").show()})})});