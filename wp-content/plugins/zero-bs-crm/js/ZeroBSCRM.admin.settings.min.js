function zeroBSCRM_settingsPage_bindCustomFields(){console.log("======== CUSTOM FIELDS EDITOR =============");for(var e=["addresses","customers","customersfiles","companies","quotes","invoices","transactions"],s=0;s<e.length;s++){let t=e[s];void 0!==window.wpzbscrmCustomFields[t]&&(jQuery.each(window.wpzbscrmCustomFields[t],function(e,s){"customersfiles"==t?zbscrmJS_customFields_buildLineFiles("customersfiles",s[0]):zbscrmJS_customFields_buildLineV3(t,s)}),jQuery("#zbscrm-addcustomfield-"+t).on("click",function(){"customersfiles"==t?zbscrmJS_customFields_buildLineFiles(t,""):zbscrmJS_customFields_buildLine(t,"text","","")}))}setTimeout(function(){zeroBSCRMJS_genericLoaded()},0)}function zbscrmJS_customFields_buildLineV3(e,s){var t,i=1;void 0!==window.zbs_root.dal&&(i=parseInt(window.zbs_root.dal)),3===(i="customers"==e?3:i)?(i=s[2],"select"==s[0]&&""==s[2]&&"object"==typeof s[3]&&(i=s[3].join()),t="",void 0!==s[3]&&(t=s[3]),zbscrmJS_customFields_buildLine(e,s[0],s[1],i,t)):zbscrmJS_customFields_buildLine(e,s[0],s[1],s[2])}function zbscrmJS_customFields_buildLineFiles(e,s){var t='<tr class="zbscrm-cf"><td class="">',t=(t+='<input type="text" class="form-control" name="wpzbscrm_cf['+e+'][name][]" value="'+(s=void 0===s?zeroBSCRMJS_settingsLang("customfield","Custom Field"):s)+'" placeholder="'+zeroBSCRMJS_settingsLang("fileboxname","File Box Name")+'" /><br />')+('<button type="button" class="zbscrm-remove button" style="margin:5px">'+zeroBSCRMJS_settingsLang("remove","Remove")+"</button></td></tr>");jQuery("#zbscrm-"+e+"-custom-fields tr").last().before(t),setTimeout(function(){zbscrmJS_customFields_bindRowControls()},0)}function zbscrmJS_customFields_buildLine(e,s,t,i,r){void 0===s&&(s="text"),void 0===i&&(i=""),void 0===r&&(r="");var o='<tr class="zbscrm-cf"><td class="zbscrm-cf-n">',t=(o+='<input type="text" class="form-control" name="wpzbscrm_cf['+e+'][name][]" value="'+(t=void 0===t?zeroBSCRMJS_settingsLang("customfield","Custom Field"):t)+'" placeholder="'+zeroBSCRMJS_settingsLang("fieldname","Field Name")+'" />',""!==r&&(o+='<div class="ui tiny label teal">'+r+"</div>"),o=(o+='<div style="margin-top:.5em"><button type="button" class="zbscrm-remove button" style="margin:5px;">Remove</button></div></td><td>')+('<label class="zbscrm-cf-fieldtype-label">'+zeroBSCRMJS_settingsLang("fieldtype","Field Type:")+"</label>"),void 0!==window.zbs_root.wl&&1!=window.zbs_root.wl&&(o+='<a href="'+window.wpzbscrm_settings_urls.autonumberhelp+'" target="_blank" class="ui mini right floated basic blue button zbs-generic-hide zbs-cf-type-autonumber"><i class="info icon"></i> '+zeroBSCRMJS_settingsLang("autonumberguide","Autonumber Guide")+"</a>"),o=(o=(o+=(""==t&&""==i&&""==r?zbscrmJS_customFields_buildSelect:zbscrmJS_customFields_buildNonSelect)(e,s))+'<div class="zbscrm-cf-settings-wrap">'+'<div class="zbs-placeholder-text"></div>')+('<input type="text" class="form-control zbs-generic-hide zbs-generic" name="wpzbscrm_cf['+e+'][placeholder][]" value="'+i+'" placeholder="'+zeroBSCRMJS_settingsLang("fieldplacehold","Field Placeholder Text")+'" />'),""),r=1,c="";"autonumber"==s&&void 0!==i&&""!==i&&3==(s=i.split("#")).length&&(t=s[0],r=s[1],c=s[2]),o=(o=(o=(o=(o=(o=(o+='<div class="zbs-cf-type-autonumber-wrap zbs-generic-hide zbs-cf-type-autonumber">')+'<div class="zbs-cf-type-autonumber-input-wrap"><div class="ui labeled input"><div class="ui label">'+zeroBSCRMJS_settingsLang("prefix","Prefix")+"</div>")+'<input type="text" class="form-control zbs-generic-hide zbs-cf-type-autonumber" name="wpzbscrm_cf['+e+'][anprefix][]" value="'+t+'" placeholder="'+zeroBSCRMJS_settingsLang("prefix","Prefix")+" "+zeroBSCRMJS_settingsLang("prefixe","(e.g. ABC-)")+'" /></div></div>')+'<div class="zbs-cf-type-autonumber-input-wrap"><div class="ui labeled input"><div class="ui label">'+zeroBSCRMJS_settingsLang("nextnumber","Next Number")+"</div>")+'<input type="text" class="form-control zbs-generic-hide zbs-cf-type-autonumber intOnly zbs-dc" name="wpzbscrm_cf['+e+'][annextnumber][]" value="'+r+'" placeholder="'+zeroBSCRMJS_settingsLang("nextnumber","Next Number")+" "+zeroBSCRMJS_settingsLang("nextnumbere","(e.g. 1)")+'" /></div></div>')+'<div class="zbs-cf-type-autonumber-input-wrap"><div class="ui labeled input"><div class="ui label">'+zeroBSCRMJS_settingsLang("suffix","Suffix")+"</div>")+'<input type="text" class="form-control zbs-generic-hide zbs-cf-type-autonumber" name="wpzbscrm_cf['+e+'][ansuffix][]" value="'+c+'" placeholder="'+zeroBSCRMJS_settingsLang("suffix","Suffix")+" "+zeroBSCRMJS_settingsLang("suffixe"," (e.g. -FINI)")+'" /></div></div></div></div></td></tr>',jQuery("#zbscrm-"+e+"-custom-fields tr").last().before(o),setTimeout(function(){zbscrmJS_customFields_bindRowControls()},0)}function zbscrmJS_customFields_buildSelect(e,i){var r='<select class="form-control zbscrm-customtype" name="wpzbscrm_cf['+e+'][type][]" id="wpzbscrm_cf['+e+'][type][]">';return jQuery.each(window.wpzbscrmAcceptableTypes,function(e,s){var t=ucwords(s);"Radio"==(t="Encrypted"==(t="Numberint"==(t="Numberfloat"==(t="Tel"==t?zeroBSCRMJS_settingsLang("tel","Telephone"):t)?zeroBSCRMJS_settingsLang("numbdec","Numeric (Decimals)"):t)?zeroBSCRMJS_settingsLang("numb","Numeric"):t)?zeroBSCRMJS_settingsLang("encryptedtext","Encrypted"):t)&&(t=zeroBSCRMJS_settingsLang("radiobuttons","Radio Buttons")),r+='<option value="'+s+'"',s==i&&(r+=' selected="selected"'),r+=">"+t+"</option>"}),r+="</select>"}function zbscrmJS_customFields_buildNonSelect(e,i){var r="";return jQuery.each(window.wpzbscrmAcceptableTypes,function(e,s){var t=ucwords(s);"Radio"==(t="Encrypted"==(t="Numberint"==(t="Numberfloat"==(t="Tel"==t?zeroBSCRMJS_settingsLang("tel","Telephone"):t)?zeroBSCRMJS_settingsLang("numbdec","Numeric (Decimals)"):t)?zeroBSCRMJS_settingsLang("numb","Numeric"):t)?zeroBSCRMJS_settingsLang("encryptedtext","Encrypted"):t)&&(t=zeroBSCRMJS_settingsLang("radiobuttons","Radio Buttons")),s==i&&(r+='<div class="ui label blue">'+t+"</div>")}),r+='<input type="hidden" name="wpzbscrm_cf['+e+'][type][]"  class="zbscrm-customtype" id="wpzbscrm_cf['+e+'][type][]" value="'+i+'">'}function zbscrmJS_customFields_updateRow(e){var s=jQuery("select.zbscrm-customtype, input.zbscrm-customtype",e).val();void 0===s&&(s="text"),jQuery(".zbs-placeholder-text",jQuery(e)).html(zbscrmJS_customFieldTypePlaceholder(s)),"autonumber"==s||"encrypted"==s?(jQuery(".zbs-generic-hide",jQuery(e)).hide(),jQuery(".zbs-cf-type-"+s+"-hide",jQuery(e)).hide(),jQuery(".zbs-cf-type-"+s,jQuery(e)).show()):(jQuery(".zbs-generic-hide",jQuery(e)).hide(),jQuery(".zbs-generic",jQuery(e)).show())}function zbscrmJS_customFields_bindRowControls(){zbscrm_JS_bindFieldValidators(),jQuery("tr.zbscrm-cf").each(function(e,s){zbscrmJS_customFields_updateRow(jQuery(s).closest("tr.zbscrm-cf"))}),jQuery(".zbscrm-remove").off("click").on("click",function(){jQuery(this).closest("tr").remove()}),jQuery(".zbscrm-customtype").off("change").on("change",function(){zbscrmJS_customFields_updateRow(jQuery(this).closest("tr.zbscrm-cf"))})}function zbscrmJS_customFieldTypePlaceholder(e){switch(placeholderstr=zeroBSCRMJS_settingsLang("placeholder","Placeholder"),e){case"autonumber":placeholderstr=zeroBSCRMJS_settingsLang("autonumberformat","Autonumber Format");break;case"select":case"radio":case"checkbox":placeholderstr=zeroBSCRMJS_settingsLang("csvopt","CSV of options (e.g. 'a,b,c')");break;default:placeholderstr=zeroBSCRMJS_settingsLang("placeholder","Placeholder")}return placeholderstr+":"}function zeroBSCRMJS_settingsLang(e,s){return void 0===s&&(s=""),void 0!==window.wpzbscrm_settings_lang[e]?window.wpzbscrm_settings_lang[e]:s}jQuery(function(){void 0!==window.wpzbscrm_settings_page&&"customfields"===window.wpzbscrm_settings_page&&zeroBSCRM_settingsPage_bindCustomFields()});