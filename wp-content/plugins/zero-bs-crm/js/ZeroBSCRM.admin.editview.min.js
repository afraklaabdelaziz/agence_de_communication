function zeroBSCRMJS_initEditView(){jQuery(".ui.dropdown").dropdown(),jQuery("#zbs-edit-save").off("click").on("click",function(){zeroBSCRMJS_buildTagsInput(),window.zbscrmjsPageChangesSave=!0,jQuery("#zbs-edit-form").submit(),setTimeout(function(){window.zbscrmjsPageChangesSave=!1},2e3)}),zeroBSCRMJS_drawEditView(),zeroBSCRMJS_preLeaveEditView()}jQuery(document).ready(function(){void 0!==window.zbsEditSettings&&(zeroBSCRMJS_initEditView(),void 0!==window.zbsEditSettings.objdbname&&("contact"==window.zbsEditSettings.objdbname?(zeroBSCRMJS_editContactInit(),jpcrm_bind_linkify()):"company"==window.zbsEditSettings.objdbname?jpcrm_bind_linkify():"event"==window.zbsEditSettings.objdbname&&setTimeout(function(){zeroBSCRMJS_events_showContactLinkIf(jQuery("#zbse_customer").val()),zeroBSCRMJS_events_showCompanyLinkIf(jQuery("#zbse_company").val())},0)))});var zbscrmjsPageChangesSave=!1;function zeroBSCRMJS_preLeaveEditView(){jQuery(window).on("beforeunload",function(){if(0<Object.keys(window.zbscrmjsPageChanges).length&&!window.zbscrmjsPageChangesSave)return"Are you sure you want to leave, you will loose unsaved changes?"})}function zeroBSCRMJS_editViewLang(e,n){return void 0===n&&(n=""),void 0!==window.zbsEditViewLangLabels[e]?window.zbsEditViewLangLabels[e]:n}function zeroBSCRMJS_drawEditView(){window.zbsDrawEditViewBlocker||(window.zbsDrawEditViewBlocker=!0,jQuery("#zbs-list-table-wrap").html(window.zbsDrawListLoadingBoxHTML),zeroBSCRMJS_buildTags(),zeroBSCRMJS_editViewBinds(),zeroBSCRMJS_hideNotificationsAfter())}function zeroBSCRMJS_editViewBinds(){}function zeroBSCRMJS_hideNotificationsAfter(){setTimeout(function(){jQuery("#zbs-edit-notification-wrap .zbs-not-urgent").slideUp(300,function(){0==jQuery("#zbs-edit-notification-wrap .ui.info:visible").length&&jQuery("#zbs-edit-notification-row").hide()})},1500)}function zeroBSCRMJS_editContactInit(){jQuery("#zbs-contact-edit-avatar").on("mouseenter",function(){jQuery("#zbs-edit-contact-avatar").show()}).on("mouseleave",function(){jQuery("#zbs-edit-contact-avatar").hide()}),jQuery("#zbs-edit-contact-avatar").on("click",function(e){e.preventDefault();var i=wp.media({title:window.zbsContactAvatarLang.upload,multiple:!1}).open().on("select",function(e){var n=i.state().get("selection").first().toJSON().url;jQuery("#zbs-contact-avatar-custom-url").val(n),console.log("assigned:",n),jQuery("h2",jQuery("#zbs-contact-edit-avatar")).html('<img src="'+n+'" alt="" />')})}),jQuery(".send-sms-none").on("click",function(e){swal("Twilio Extension Needed!",'To SMS your contacts you need the <a target="_blank" style="font-weight:900;text-decoration:underline;" href="https://jetpackcrm.com/extension-bundles/">Twilio extension</a> (included in our Entrepreneurs Bundle)',"info")})}function jpcrm_bind_linkify(){jQuery(".zbs-text-input input").keyup(function(){zeroBSCRMJS_initLinkify(this)}),jQuery(".zbs-text-input input").each(function(e,n){zeroBSCRMJS_initLinkify(n)})}function zeroBSCRMJS_initLinkify(e){var n=jQuery(e).val(),i=!1;5<n.length&&("object"==typeof(n=zeroBSCRMJS_retrieveURLS(n))&&"null"!=typeof n&&null!=n&&"undefined"!=n[0]&&(jQuery(".zbs-linkify",jQuery(e).parent()).remove(),jQuery(e).parent().addClass("ui action input fluid").append('<button class="ui icon button zbs-linkify" type="button" data-url="'+encodeURI(n[0])+'" title="Go To '+encodeURI(n[0])+'"><i class="linkify icon"></i></button>'),zeroBSCRMJS_bindLinkify(),i=!0)),i||(jQuery(".zbs-linkify",jQuery(e).parent()).remove(),jQuery(e).parent().removeClass("ui action input fluid"))}function zeroBSCRMJS_bindLinkify(){jQuery(".zbs-linkify").off("click").on("click",function(){var e=jQuery(this).attr("data-url");void 0!==e&&""!=e&&window.open(e,"_blank")})}function zbscrmjs_events_setContact(e){void 0!==e.id&&(jQuery("#zbse_customer").val(e.id),setTimeout(function(){zeroBSCRMJS_events_showContactLinkIf(e.id)},0))}function zbscrmjs_events_setCompany(e){void 0!==e.id&&(jQuery("#zbse_company").val(e.id),setTimeout(function(){zeroBSCRMJS_events_showCompanyLinkIf(e.id)},0))}function zbscrmjs_events_changeContact(e){void 0!==e&&""!=e||(jQuery("#zbse_customer").val(""),setTimeout(function(){zeroBSCRMJS_events_showContactLinkIf("")},0))}function zbscrmjs_events_changeCompany(e){void 0!==e&&""!=e||(jQuery("#zbse_company").val(""),setTimeout(function(){zeroBSCRMJS_events_showCompanyLinkIf("")},0))}function zeroBSCRMJS_events_showContactLinkIf(e){var n;jQuery(".zbs-task-for .zbs-view-contact").remove(),jQuery("#zbs-event-learn-nav .zbs-quicknav-contact").remove(),null!=e&&""!==e&&0<(e=parseInt(e))&&(n=(n='<div class="ui mini animated button zbs-view-contact">')+('<div class="visible content">'+zeroBSCRMJS_editViewLang("view","View"))+'</div><div class="hidden content"><i class="user icon"></i></div></div>',jQuery(".zbs-task-for").prepend(n),n='<a target="_blank" style="margin-left:6px;" class="zbs-quicknav-contact ui icon button blue mini labeled" href="'+window.zbsObjectViewLinkPrefixCustomer+e+'"><i class="user icon"></i> '+zeroBSCRMJS_editViewLang("contact","Contact")+"</a>",jQuery("#zbs-event-learn-nav").append(n),zeroBSCRMJS_events_bindContactLinkIf())}function zeroBSCRMJS_events_bindContactLinkIf(){jQuery(".zbs-task-for .zbs-view-contact").off("click").on("click",function(){var e=parseInt(jQuery("#zbse_customer").val());null!=e&&""!==e&&0<(e=parseInt(e))&&(e=window.zbsObjectViewLinkPrefixCustomer+e,window.open(e,"_parent"))})}function zeroBSCRMJS_events_showCompanyLinkIf(e){var n;jQuery(".zbs-task-for-company .zbs-view-company").remove(),jQuery("#zbs-event-learn-nav .zbs-quicknav-company").remove(),null!=e&&""!==e&&0<(e=parseInt(e))&&(n=(n='<div class="ui mini animated button zbs-view-company">')+('<div class="visible content">'+zeroBSCRMJS_editViewLang("view","View"))+'</div><div class="hidden content"><i class="building icon"></i></div></div>',jQuery(".zbs-task-for-company").prepend(n),n='<a target="_blank" style="margin-left:6px;" class="zbs-quicknav-contact ui icon button blue mini labeled" href="'+window.zbsObjectViewLinkPrefixCompany+e+'"><i class="user icon"></i> '+zeroBSCRMJS_editViewLang("company","Company")+"</a>",jQuery("#zbs-event-learn-nav").append(n),zeroBSCRMJS_events_bindCompanyLinkIf())}function zeroBSCRMJS_events_bindCompanyLinkIf(){jQuery(".zbs-task-for-company .zbs-view-company").off("click").on("click",function(){var e=parseInt(jQuery("#zbse_company").val());null!=e&&""!==e&&0<(e=parseInt(e))&&(e=window.zbsObjectViewLinkPrefixCompany+e,window.open(e,"_parent"))})}